<p id="notice"><%= notice %></p>

<h1><%= @article.title %></h1>

<p>
  <strong>Author:</strong>
  <%= @article.user.username %>
</p>

<p>
  <strong>Content:</strong>
  <%= @article.content %>
</p>

<hr>

<p>
  <strong>Votes:</strong>
  <span id="vote-count"><%= @article.vote_count %></span>
  <%= link_to 'Upvote', vote_article_path(@article, :type => 'upvote'), method: :patch, :remote => true %> | 
  <%= link_to 'Downvote', vote_article_path(@article, :type => 'downvote'), method: :patch, :remote => true %>
</p>

<hr>

<% if @comments.empty? %>
  There are no comments for this article.
  <hr>
<% else %>
  <h2>Comments</h2>
  <hr>

  <div id = "comments-pending">
    <%= render 'comments/comments_pending' %>
  </div>

  <%= render 'comments/comments' %>
<% end %>

<% unless @article.user == current_user%>

  <h3>Add a comment</h3>

  <%= form_with(model: [@article, @article.comments.build], local: false) do |form| %>
    <p>
      <%= form.label :title %>
      <%= form.text_field :title %>
    </p>
    <p>
      <%= form.label :content %>
      <%= form.text_area :content %>
    </p>
    <p>
      <%= form.submit %>
    </p>
  <% end %>

<% end %>

<%= link_to 'Back', :back %>
